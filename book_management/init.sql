
create database book_service_db;
\c book_service_db;
create table books(
	book_id BIGSERIAL primary key,
	book_title VARCHAR not null,
	isbn VARCHAR(17) not null,
	description text not null,
	created_at TIMESTAMP default CURRENT_TIMESTAMP not null,
	updated_at TIMESTAMP default clock_timestamp() not null,
	deleted_at TIMESTAMP
);

create type book_status as enum('borrowed','not available','available');
create table book_items(
	book_item_id BIGSERIAL primary key,
	book_id BIGINT not null,
	book_number VARCHAR not null,
	status book_status not null,
	created_at TIMESTAMP default CURRENT_TIMESTAMP not null,
	updated_at TIMESTAMP default clock_timestamp() not null,
	deleted_at TIMESTAMP,
	foreign Key(book_id) references books(book_id)
);

create type stock_status as enum('borrowed','returned','not available','available');
	
create table stock_journals(
	stock_journal_id BIGSERIAL primary key,
	book_item_id BIGINT not null,
	status stock_status not null,
	user_id BIGINT not null,
	created_at TIMESTAMP default CURRENT_TIMESTAMP not null,
	updated_at TIMESTAMP default clock_timestamp() not null,
	deleted_at TIMESTAMP,
	foreign Key(book_item_id) references book_items(book_item_id)
);


INSERT INTO books (book_title, isbn, description)
VALUES
('The Great Gatsby', '9780743273565', 'A novel written by American author F. Scott Fitzgerald.'),
('1984', '9780451524935', 'A dystopian social science fiction novel and cautionary tale, written by George Orwell.'),
('To Kill a Mockingbird', '9780060935467', 'A novel by Harper Lee.'),
('Pride and Prejudice', '9781503290563', 'A novel by Jane Austen.'),
('The Catcher in the Rye', '9780316769488', 'A novel by J.D. Salinger.'),
('The Hobbit', '9780261102217', 'A fantasy novel by J.R.R. Tolkien.'),
('Moby-Dick', '9780142437247', 'A novel by Herman Melville.'),
('War and Peace', '9780307388876', 'A historical novel by Leo Tolstoy.'),
('The Odyssey', '9780140268867', 'An epic poem by Homer.'),
('The Divine Comedy', '9780451208810', 'An epic poem by Dante Alighieri.');

INSERT INTO book_items (book_id, book_number, status)
VALUES
(1, 'BK001', 'available'),
(1, 'BK002', 'available'),
(1, 'BK003', 'available'),
(1, 'BK004', 'available'),
(1, 'BK005', 'available'),
(1, 'BK006', 'available'),
(1, 'BK007', 'available'),
(1, 'BK008', 'available'),
(1, 'BK009', 'available'),
(1, 'BK010', 'available'),
(2, 'BK011', 'borrowed'),
(2, 'BK012', 'borrowed'),
(2, 'BK013', 'available'),
(2, 'BK014', 'available'),
(2, 'BK015', 'available'),
(2, 'BK016', 'available'),
(2, 'BK017', 'available'),
(2, 'BK018', 'borrowed'),
(2, 'BK019', 'available'),
(2, 'BK020', 'available'),
(3, 'BK021', 'available'),
(3, 'BK022', 'borrowed'),
(3, 'BK023', 'available'),
(3, 'BK024', 'available'),
(3, 'BK025', 'available'),
(3, 'BK026', 'available'),
(3, 'BK027', 'borrowed'),
(3, 'BK028', 'available'),
(3, 'BK029', 'available'),
(3, 'BK030', 'available'),
(4, 'BK031', 'available'),
(4, 'BK032', 'available'),
(4, 'BK033', 'available'),
(4, 'BK034', 'borrowed'),
(4, 'BK035', 'available'),
(4, 'BK036', 'available'),
(4, 'BK037', 'borrowed'),
(4, 'BK038', 'available'),
(4, 'BK039', 'available'),
(4, 'BK040', 'available'),
(5, 'BK041', 'available'),
(5, 'BK042', 'borrowed'),
(5, 'BK043', 'available'),
(5, 'BK044', 'borrowed'),
(5, 'BK045', 'available'),
(5, 'BK046', 'available'),
(5, 'BK047', 'borrowed'),
(5, 'BK048', 'available'),
(5, 'BK049', 'available'),
(5, 'BK050', 'available'),
(6, 'BK051', 'available'),
(6, 'BK052', 'borrowed'),
(6, 'BK053', 'available'),
(6, 'BK054', 'available'),
(6, 'BK055', 'available'),
(6, 'BK056', 'available'),
(6, 'BK057', 'borrowed'),
(6, 'BK058', 'available'),
(6, 'BK059', 'available'),
(6, 'BK060', 'available'),
(7, 'BK061', 'available'),
(7, 'BK062', 'available'),
(7, 'BK063', 'borrowed'),
(7, 'BK064', 'available'),
(7, 'BK065', 'available'),
(7, 'BK066', 'available'),
(7, 'BK067', 'borrowed'),
(7, 'BK068', 'available'),
(7, 'BK069', 'available'),
(7, 'BK070', 'available'),
(8, 'BK071', 'available'),
(8, 'BK072', 'available'),
(8, 'BK073', 'borrowed'),
(8, 'BK074', 'available'),
(8, 'BK075', 'available'),
(8, 'BK076', 'borrowed'),
(8, 'BK077', 'available'),
(8, 'BK078', 'available'),
(8, 'BK079', 'borrowed'),
(8, 'BK080', 'available'),
(9, 'BK081', 'available'),
(9, 'BK082', 'borrowed'),
(9, 'BK083', 'available'),
(9, 'BK084', 'available'),
(9, 'BK085', 'borrowed'),
(9, 'BK086', 'available'),
(9, 'BK087', 'available'),
(9, 'BK088', 'available'),
(9, 'BK089', 'borrowed'),
(9, 'BK090', 'available'),
(10, 'BK091', 'available'),
(10, 'BK092', 'borrowed'),
(10, 'BK093', 'available'),
(10, 'BK094', 'borrowed'),
(10, 'BK095', 'available'),
(10, 'BK096', 'available'),
(10, 'BK097', 'borrowed'),
(10, 'BK098', 'available'),
(10, 'BK099', 'available'),
(10, 'BK100', 'available');


INSERT INTO stock_journals (book_item_id, status, user_id)
VALUES
(1, 'returned', 1001),
(2, 'borrowed', 1002),
(3, 'returned', 1003),
(4, 'returned', 1004),
(5, 'borrowed', 1005),
(6, 'returned', 1006),
(7, 'borrowed', 1007),
(8, 'returned', 1008),
(9, 'borrowed', 1009),
(10, 'returned', 1010),
(11, 'borrowed', 1011),
(12, 'returned', 1012),
(13, 'returned', 1013),
(14, 'borrowed', 1014),
(15, 'returned', 1015),
(16, 'borrowed', 1016),
(17, 'returned', 1017),
(18, 'returned', 1018),
(19, 'borrowed', 1019),
(20, 'returned', 1020),
(21, 'returned', 1021),
(22, 'borrowed', 1022),
(23, 'returned', 1023),
(24, 'borrowed', 1024),
(25, 'returned', 1025),
(26, 'returned', 1026),
(27, 'borrowed', 1027),
(28, 'returned', 1028),
(29, 'borrowed', 1029),
(30, 'returned', 1030),
(31, 'returned', 1031),
(32, 'borrowed', 1032),
(33, 'returned', 1033),
(34, 'borrowed', 1034),
(35, 'returned', 1035),
(36, 'returned', 1036),
(37, 'borrowed', 1037),
(38, 'returned', 1038),
(39, 'borrowed', 1039),
(40, 'returned', 1040),
(41, 'returned', 1041),
(42, 'borrowed', 1042),
(43, 'returned', 1043),
(44, 'borrowed', 1044),
(45, 'returned', 1045),
(46, 'returned', 1046),
(47, 'borrowed', 1047),
(48, 'returned', 1048),
(49, 'borrowed', 1049),
(50, 'returned', 1050);

